
<!DOCTYPE html>
<html>
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">


        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
        <title>Potro≈°nja vode</title>
    </head>
<body ng-app="toDoApp">

    <div>
         <h1>Todo list - store items to local database</h1>

         <h3>Use Google chrome to inspect the content of the local database by pressing F12 and selecting the Resources tab</h3>

        <div ng-controller="TodoCtrl">
            <label>Task:</label>
            <input ng-model="newTodo.task" />
            <label>Place:</label>
            <input ng-model="newTodo.place" />
            <label>Completed:</label>
            <input type="checkbox" ng-model="newTodo.done" /> 
            <a href="#" ng-click="addNew(newTodo)">Add new</a>

            <ul>
                <li ng-repeat="todo in todos">{{todo.Id}}, <input type="text" value="{{todo.task}}" ng-model="todo.task">,
                <input type="text" value="{{todo.place}}" ng-model="todo.place">
                    Completed: <input type="checkbox" ng-model="todo.done" ng-click="todo.save()"/> 
                    <button ng-click="todo.save()">UPDATE</button>
                    <button ng-click="remove(todo)">REMOVE</button>
                </li>
            </ul>
        </div>
    </div>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" src="http://include.jaydata.org/jaydata.js"></script>

<script type="text/javascript">

// http://www.oodlestechnologies.com/blogs/Use-of-Web-SQL-in-Phonegap
// https://github.com/orbitaloop/WebSqlSync

var app = angular.module("toDoApp", []);

app.controller("TodoCtrl", ["$scope", function ($scope) {

    $scope.todos = [];

    var Todo = $data.define("Todo", {
        task: String,
        place: String,
        done: Boolean
    });

    Todo.readAll().then(function (todos) {
        $scope.$apply(function () {
            $scope.todos = todos;
        });
    });

    $scope.addNew = function (todo) {
        Todo.save(todo).then(function (todo) {
            $scope.$apply(function () {
                $scope.newTodo = null;
                $scope.todos.push(todo);
            });
        });
    };

    $scope.remove = function (todo) {

        todo.remove();

        Todo.readAll().then(function (todos) {
            $scope.$apply(function () {
                $scope.todos = todos;
            });
        });         
    };

}]);




</script>
</body>
<!-- cordova script (this will be a 404 during development) -->
<!--     <script src="cordova.js"></script> -->


  </body>
</html>